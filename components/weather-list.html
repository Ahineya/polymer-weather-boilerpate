<link rel="import" href="/bower_components/polymer/polymer.html"/>
<link rel="import" href="/bower_components/core-ajax/core-ajax.html"/>

<polymer-element name="weather-list">
    <template>
        <style>
            #list {
                height: 1600px;
                width: 600px;
            }
        </style>
        <core-ajax id="ajax"
                   auto
                   url=""
                   on-core-response="{{weatherLoaded}}"
                   handleAs="json"></core-ajax>
        <template repeat="{{data as other}}">
            <weather-card></weather-card>
        </template>
    </template>
    <script>
        Polymer({
            data: [],
            ready: function () {
                this.$.ajax.url = 'http://api.openweathermap.org/data/2.5/forecast/daily?q=Kyiv&mode=json&units=metric&cnt=10&APPID=50e418e0f0c0e501713115a1df9ca42e';
            },
            weatherLoaded: function () {
                this.data = this.$.ajax.response.list.slice(0);
                console.log(this.data);
            }
        });
    </script>
</polymer-element>